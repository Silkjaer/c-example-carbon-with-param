{
  "manifestVersion": "1",
  "name": "c-carbon-example-with-param",
  "version": "1.0.0",
  "description": "Carbon hook sends a percentage of outgoing payments to a dedicated account (parameterized beneficiary)",
  "publisher": "rThomasoLNAej9QcZV6hDrH7FxfJH7Cft",
  "repo": "https://github.com/Silkjaer/c-example-carbon-with-param",
  "license": "MIT",
  "networks": [
    "xahau-testnet"
  ],
  "roles": {
    "installer": {
      "label": "Installer",
      "description": "The account installing the hook"
    },
    "carbon_accid": {
      "label": "Beneficiary",
      "description": "The beneficiary account receiving carbon offset payments"
    }
  },
  "userConfig": {
    "niceNumber": {
      "label": "Nice number",
      "default": "1000000",
      "encoding": "uint32",
      "required": false,
      "inputType": "uint32",
      "endianness": "BE",
      "description": "A nice number we wont use for anything",
      "validation": {
        "min": 50000,
        "max": 100000000
      }
    },
    "niceString": {
      "label": "Nice string",
      "default": "This is a nice string! Sömæ Fåñï Characters.",
      "encoding": "utf8",
      "inputType": "string",
      "description": "A nice string we wont use for anything"
    }
  },
  "hooks": [
    {
      "id": "main",
      "artifact": {
        "toolchain": "hooks-c",
        "source_path": "carbon.c"
      },
      "HookNamespace": "0000000000000000000000000000000000000000000000000000000000000000",
      "HookOn": [
        "PAYMENT"
      ],
      "HookCanEmit": [
        "PAYMENT"
      ],
      "HookParameters": [
        {
          "HookParameterName": "carbon_accid",
          "HookParameterValue": {
            "type": "account",
            "value": "{{carbon_accid}}",
            "encoding": "hex"
          }
        }
      ],
      "abi": {
        "notes": "Auto-generated from manifest and code analysis",
        "hookParameters": [
          {
            "data": [
              {
                "type": "AccountID",
                "byteLength": 20
              }
            ],
            "name": "carbon_accid",
            "selector": [
              {
                "type": "VarString",
                "notes": "Parameter name as stored on-ledger",
                "exclude": true,
                "pattern": "carbon_accid",
                "byteLength": 12,
                "patternEncoding": "ascii"
              }
            ]
          }
        ]
      },
      "postInstallSettings": [
        {
          "name": "Update Beneficiary",
          "userConfig": {
            "newBeneficiary": {
              "label": "New Beneficiary Account",
              "encoding": "hex",
              "required": true,
              "inputType": "account",
              "description": "The account that will receive carbon offset payments"
            }
          },
          "description": "Update the carbon offset beneficiary account that receives payments",
          "HookParameters": [
            {
              "HookParameterName": "carbon_accid",
              "HookParameterValue": {
                "type": "userConfig",
                "value": "{{newBeneficiary}}"
              }
            }
          ],
          "TransactionType": "Invoke"
        },
        {
          "name": "Update something else",
          "userConfig": {
            "newBeneficiary": {
              "label": "New Beneficiary Account",
              "encoding": "hex",
              "required": true,
              "inputType": "account",
              "description": "The account that will receive carbon offset payments"
            }
          },
          "description": "Update something else??",
          "HookParameters": [
            {
              "HookParameterName": "carbon_accid",
              "HookParameterValue": {
                "type": "userConfig",
                "value": "{{newBeneficiary}}"
              }
            }
          ],
          "TransactionType": "Invoke"
        }
      ]
    }
  ],
  "install": [
    {
      "TransactionType": "SetHook",
      "description": "Install the carbon hook with beneficiary account parameter",
      "role": "installer",
      "hookIds": [
        "main"
      ]
    },
    {
      "TransactionType": "Payment",
      "description": "Pay a coffee to the dev",
      "required": false,
      "role": "installer",
      "Destination": "rThomasoLNAej9QcZV6hDrH7FxfJH7Cft"
    },
    {
      "TransactionType": "Invoke",
      "description": "Send some arbitrary blob invoke stuff",
      "role": "installer",
      "Blob": [
        {
          "type": "ascii",
          "value": "MYID"
        },
        {
          "type": "userConfig",
          "value": "{{niceString}}"
        },
        {
          "type": "userConfig",
          "value": "{{niceNumber}}"
        }
      ]
    }
  ]
}
